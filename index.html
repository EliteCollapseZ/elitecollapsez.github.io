<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>EliteCollapseZ's blog</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <h1>EliteCollapseZ's blog</h1>
    <p class="centered">Find joy in challenges</p>

    <div id="content"></div>

    <script>
        async function loadWriteupsList() {
            try {
                const res = await fetch("writeups/index.json");
                if (!res.ok) throw new Error("Failed to load index.json");

                const writeups = await res.json();

                //sorting based on date
                writeups.sort((a, b) => {
                    return new Date(b.date) - new Date(a.date);
                });

                const ul = document.createElement("ul");

                for (const item of writeups) {
                    const li = document.createElement("li");
                    li.className = 'writeup_list';
                    const a = document.createElement("a");

                    a.href = `writeup.html?writeup=${encodeURIComponent(item.title + "/writeup.md")}`;
                    a.textContent = `${item.title} (${item.date})`;

                    li.appendChild(a);
                    ul.appendChild(li);
                }

                document.getElementById("content").appendChild(ul);

            } catch (err) {
                console.error(err);
                document.getElementById("content").innerHTML =
                    "<p>Failed to load writeups.</p>";
            }
        }

        loadWriteupsList();
    </script>
</body>
</html>
